---
phase: 17-generic-product-service-offerings
plan: 04
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/lib/ai/section-prompts.ts
autonomous: true
---

<objective>
Update the AI schema and prompts for the product-service section to generate Offering-based content instead of Package-based content. Add industry overlays for business-type-aware generation.

Purpose: AI Generate/Improve/Expand must produce data matching the new Offering model. Prompts must be descriptive and avoid tier terminology.
Output: Updated Zod schemas, enriched prompts, and industry overlays for product-service.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/17-generic-product-service-offerings/17-01-SUMMARY.md

@src/lib/ai/section-prompts.ts
@src/types/plan.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ProductService Zod schema and prompts</name>
  <files>src/lib/ai/section-prompts.ts</files>
  <action>
**Replace the existing PackageSchema, AddOnSchema, ProductServiceSchema** with new schemas matching the Offering model:

```typescript
const OfferingSchema = z.object({
  id: z.string().describe('Unique identifier for the offering'),
  name: z.string().describe('Clear, descriptive name for this product or service'),
  description: z.string().describe('Detailed description explaining what this offering includes, who it is for, and what value it delivers. Write 2-4 sentences minimum.'),
  price: z.number().nullable().describe('Price in dollars. Use null if pricing is "on request" or varies.'),
  priceLabel: z.string().optional().describe('Pricing qualifier, e.g. "per month", "per hour", "per unit", "starting from"'),
  addOnIds: z.array(z.string()).describe('IDs of add-ons linked to this offering. Reference IDs from the addOns array.'),
});

const AddOnSchema = z.object({
  id: z.string().describe('Unique identifier for the add-on'),
  name: z.string().describe('Clear name for this add-on'),
  description: z.string().optional().describe('Brief description of what this add-on provides'),
  price: z.number().describe('Price in dollars'),
  priceLabel: z.string().optional().describe('Pricing qualifier, e.g. "per unit", "one-time", "per month"'),
});

const ProductServiceSchema = z.object({
  overview: z.string().optional().describe('Brief overview of the entire product/service line. 1-3 sentences positioning the business offering.'),
  offerings: z.array(OfferingSchema).describe('List of products or services offered'),
  addOns: z.array(AddOnSchema).describe('Optional extras that can be linked to offerings'),
});
```

**Update the prompt texts** for `product-service`:

```typescript
'product-service': {
  generate: 'Generate a complete product and service catalog for this business. Create 3-5 distinct offerings, each with a descriptive name, detailed description (2-4 sentences explaining value, target audience, and what is included), realistic pricing with appropriate price labels (per month, per hour, per unit, etc.). Generate 3-5 add-ons with prices and brief descriptions. Link relevant add-ons to offerings via addOnIds. Write a brief overview paragraph positioning the overall product/service line. Each offering must have a unique id (use format "off-1", "off-2", etc.) and each add-on must have a unique id (use format "addon-1", "addon-2", etc.). Do NOT use tier labels like Starter, Basic, Pro, Premium, or Enterprise as offering names — use descriptive names that reflect what the offering actually is.',
  improve: 'Improve the existing product and service descriptions. Keep all current offerings and add-ons but enhance descriptions to be more detailed, compelling, and customer-focused. Refine pricing labels for clarity. Improve the overview to better position the business. Preserve all existing ids and addOnId links.',
  expand: 'Expand the existing product and service catalog. Keep all current offerings and add-ons unchanged. Add 1-2 new offerings and 2-3 new add-ons with full descriptions. Link new add-ons to relevant offerings. Enhance the overview if needed. Use unique ids for new items.',
},
```

IMPORTANT: Do NOT use tier terminology anywhere in the prompts. No "starter", "basic", "pro", "premium", "enterprise" as structural concepts. Offering names should be descriptive of what they are (e.g. "Website Design Package", "Monthly SEO Retainer", "Custom Widget Manufacturing").
  </action>
  <verify>npx tsc --noEmit — section-prompts.ts compiles. grep -i "starter\|premium\|basic tier\|pro tier" src/lib/ai/section-prompts.ts returns no matches.</verify>
  <done>Zod schema matches new Offering model. Prompts generate descriptive offerings without tier terminology. IDs generated by AI for cross-referencing.</done>
</task>

<task type="auto">
  <name>Task 2: Add industry overlays for product-service</name>
  <files>src/lib/ai/section-prompts.ts</files>
  <action>
Find the `INDUSTRY_OVERLAYS` constant in section-prompts.ts. It's a `Partial<Record<BusinessType, Partial<Record<SectionSlug, string>>>>` map. Currently product-service has NO overlays for any business type.

Add `'product-service'` overlays for each business type that has entries in INDUSTRY_OVERLAYS:

```typescript
// Inside INDUSTRY_OVERLAYS, add 'product-service' to each business type:

saas: {
  // ... existing overlays ...
  'product-service': 'Generate SaaS subscription offerings. Use recurring pricing (per month, per year). Focus on feature tiers differentiated by usage limits, integrations, or support levels. Common add-ons: extra storage, priority support, API access, custom integrations, dedicated account manager.',
},
restaurant: {
  // ... existing overlays ...
  'product-service': 'Generate menu categories or dining experiences as offerings. Price per person or per table. Focus on cuisine description, portion details, and dietary information. Common add-ons: wine pairing, private room, live entertainment, custom menu, event hosting.',
},
retail: {
  // ... existing overlays ...
  'product-service': 'Generate product categories or product lines as offerings. Focus on materials, specifications, and target customer. Common add-ons: gift wrapping, express shipping, extended warranty, personalization, insurance.',
},
service: {
  // ... existing overlays ...
  'product-service': 'Generate service packages or engagement types as offerings. Price per hour, per project, or retainer. Focus on scope of work, deliverables, and timeline. Common add-ons: rush delivery, additional revisions, on-site visits, priority support.',
},
event: {
  // ... existing overlays ...
  'product-service': 'Generate event packages or experience types as offerings. Focus on what is included, duration, capacity, and venue details. Common add-ons: photography, videography, extra hours, custom decorations, live music, catering upgrades.',
},
manufacturing: {
  // ... existing overlays ...
  'product-service': 'Generate manufactured products or production services as offerings. Focus on specifications, materials, minimum order quantities, and lead times. Price per unit or per batch. Common add-ons: custom packaging, quality certification, expedited production, installation, maintenance plans.',
},
```

If `custom` type exists in INDUSTRY_OVERLAYS, do NOT add a product-service overlay for it (custom type uses base prompts).

Preserve all existing overlays exactly — only ADD the `'product-service'` key to each business type.
  </action>
  <verify>npx tsc --noEmit — no errors. grep "'product-service'" src/lib/ai/section-prompts.ts | wc -l — shows 6+ matches (one per business type in overlays).</verify>
  <done>Industry overlays added for product-service across all 6 typed business types. AI will generate business-type-appropriate offerings.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes for section-prompts.ts
- [ ] `npm run lint` passes
- [ ] No tier terminology in prompts (grep confirms)
- [ ] Industry overlays present for saas, restaurant, retail, service, event, manufacturing
- [ ] Schema uses Offering model (not Package)
</verification>

<success_criteria>
- Zod schema matches Offering + AddOn types from Plan 01
- Generate prompt produces descriptive offerings with ids and cross-references
- Improve/Expand prompts preserve existing data
- 6 industry overlays provide business-type-specific guidance
- Zero tier terminology in any prompt text
</success_criteria>

<output>
After completion, create `.planning/phases/17-generic-product-service-offerings/17-04-SUMMARY.md`
</output>
