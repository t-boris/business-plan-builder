---
phase: 02-business-plan-sections
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified: [src/features/sections/financial-projections/index.tsx, src/features/sections/risks-due-diligence/index.tsx, src/features/sections/executive-summary/index.tsx]
autonomous: true
---

<objective>
Build the Financial Projections, Risks & Due Diligence, and Executive Summary section UIs with editable forms, pre-populated data, charts, and Firestore auto-save.

Purpose: Final batch of section UIs — includes the data-heaviest section (Financial Projections with charts), the risk/compliance section (populated from deep research), and the Executive Summary (text-based overview).
Output: 3 working section pages with forms, a Recharts revenue/cost chart, deep research risk data, and editable summary text.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-business-plan-sections/02-01-SUMMARY.md

Key source files:
@src/types/plan.ts
@src/lib/constants.ts
@src/hooks/use-section.ts
@src/store/derived-atoms.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Financial Projections section UI with Recharts</name>
  <files>src/features/sections/financial-projections/index.tsx</files>
  <action>
  Replace the placeholder with a full form UI:

  1. Use `useSection<FinancialProjections>('financial-projections', defaultFinancials)`
  2. Default data: Generate 12 months of projections based on business numbers:
     - Months: March 2026 through February 2027
     - Revenue per month: start conservative (Month 1-2: 10-15 bookings, ramp to 25/month by Month 4+)
     - Use avgCheck ~$993 (from DEFAULT_KPI_TARGETS)
     - Costs breakdown per month: marketing ($2200 baseline), labor (crew * rate * hours * bookings), supplies ($50/event), museum ($200/event for 15 tickets), transport ($150/event)
     - Profit = revenue - total costs
     - unitEconomics: { avgCheck: 993, costPerEvent: ~450, profitPerEvent: ~543, breakEvenEvents: ceil(fixedCosts / profitPerEvent) }

  3. **Revenue vs Costs Chart:** Use Recharts to display a line/area chart:
     - X-axis: months (Mar 2026 - Feb 2027)
     - Two lines/areas: Revenue (green) and Total Costs (red/orange)
     - Use `AreaChart` or `LineChart` from recharts with `ResponsiveContainer`
     - Include Tooltip showing month details on hover
     - Include Legend

  4. **Monthly P&L Table:** Below the chart, show a table with columns:
     - Month | Revenue | Marketing | Labor | Supplies | Museum | Transport | Total Costs | Profit
     - Each cell is an editable number Input
     - Profit column is calculated (revenue - sum of costs) and displayed as read-only
     - Color code profit: green if positive, red if negative
     - "Add Month" button at bottom

  5. **Unit Economics Card:** Card with 4 number inputs:
     - Average Check ($)
     - Cost Per Event ($)
     - Profit Per Event ($, calculated = avg check - cost per event, read-only)
     - Break-Even Events (calculated, read-only)

  Layout: heading, chart at top (full width, ~300px height), P&L table below, unit economics card at bottom.

  **Use Recharts components:** AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer.
  **Do NOT** connect to Jotai scenario atoms yet — this section uses its own editable data. Scenario engine integration is Phase 3.
  **Pre-populate with realistic numbers** that show a path to profitability (break-even around Month 3-4).
  </action>
  <verify>npm run build succeeds. Financial Projections page shows a revenue/costs chart and editable P&L table with 12 months of data.</verify>
  <done>Financial Projections shows Recharts area chart + editable P&L table + unit economics card, all pre-populated with 12 months of realistic projection data</done>
</task>

<task type="auto">
  <name>Task 2: Build Risks & Due Diligence and Executive Summary section UIs</name>
  <files>src/features/sections/risks-due-diligence/index.tsx, src/features/sections/executive-summary/index.tsx</files>
  <action>
  1. Replace `src/features/sections/risks-due-diligence/index.tsx` with full form UI:
     - Use `useSection<RisksDueDiligence>('risks-due-diligence', defaultRisks)`
     - Default risks pre-populated from deep research report (PROJECT.md):
       - { category: "regulatory", title: "Miami-Dade Parking Regulations", severity: "high", description: "Large trailers may be restricted in residential zones per Miami-Dade county regulations.", mitigation: "Research county trailer parking rules, obtain necessary permits, scout parking-friendly venues" }
       - { category: "legal", title: "Jellyfish Museum Contract", severity: "high", description: "Museum opens Feb 2026 — contract terms needed before underwriting '15 tickets included' in packages.", mitigation: "Secure written partnership agreement with pricing guarantees before launch" }
       - { category: "legal", title: "FTSA Compliance", severity: "medium", description: "Florida Telephone Solicitation Act compliance required for any automated texting/messaging.", mitigation: "Ensure opt-in consent for all automated messages, review FTSA requirements with legal counsel" }
       - { category: "operational", title: "Slime/Chemical Safety", severity: "medium", description: "Slime and chemical activities carry documented dermatitis/burn risk for children.", mitigation: "Mandatory gloves, pre-activity allergy screening, adult supervision ratio 1:5, first aid kit on-site" }
       - { category: "financial", title: "CAC Uncertainty", severity: "medium", description: "Actual customer acquisition costs may exceed $30/lead target in competitive Miami market.", mitigation: "Start with small ad budget in soft launch, test and optimize before scaling" }
       - { category: "operational", title: "Bilingual Market Requirement", severity: "low", description: "75.3% of Miami-Dade speaks non-English at home — monolingual English marketing limits reach.", mitigation: "Create bilingual (English/Spanish) ad creatives and landing page" }

     - Default compliance checklist:
       - "Business license and permits" — not-started
       - "Jellyfish Museum partnership agreement" — not-started
       - "General liability insurance" — not-started
       - "FTSA compliance review" — not-started
       - "Food handling permits (if applicable)" — not-started
       - "Vehicle/trailer insurance" — not-started
       - "Child safety protocol documentation" — not-started

     - **Risks table:** Each risk as a Card or table row with:
       - Severity badge: colored (red=high, amber=medium, green=low) using Tailwind bg-red-100/bg-amber-100/bg-green-100
       - Category badge: styled tag
       - Title (Input), Description (Textarea), Mitigation (Textarea)
       - "Add Risk" button, remove per risk
     - **Compliance Checklist:** List of items with:
       - Item description (Input)
       - Status toggle (Select: not-started/pending/complete) with color-coded badges
       - "Add Item" button

     Layout: heading, risks section (cards or expandable rows), compliance checklist below.

  2. Replace `src/features/sections/executive-summary/index.tsx` with form UI:
     - Use `useSection<ExecutiveSummary>('executive-summary', defaultSummary)`
     - Default data:
       - summary: "Fun Box is a premium mobile kids birthday party service operating in the Miami metropolitan area. We combine ocean-themed interactive workshops with guided Jellyfish Museum experiences, offering three all-inclusive packages ($800-$1,200) for groups of up to 15 participants."
       - mission: "To create unforgettable, hassle-free birthday celebrations that combine education and entertainment through immersive ocean-themed experiences."
       - vision: "To become Miami's leading premium kids birthday party service, known for unique museum-integrated experiences and exceptional customer satisfaction."
       - keyHighlights: ["Three packages: $800 / $980 / $1,200", "15 participants per event, all-inclusive", "Jellyfish Museum partnership with included tickets", "Target: 100-150 leads/month, 15-25% conversion", "Launch: March 2026 (soft launch → scale)", "Bilingual marketing opportunity (75% non-English at home)"]

     - **Summary section:** Large Textarea for the executive summary text
     - **Mission & Vision:** Two Textareas side by side (or stacked on mobile)
     - **Key Highlights:** Editable list of strings, each as Input with remove button, "Add Highlight" button
     - Add a muted info note: "This section will be enhanced with AI-generated content in a future update"

     Layout: heading, summary textarea (full width), mission + vision in 2-column grid, key highlights list.

  **Severity badges must be visually distinct** — use bg-red-100 text-red-800, bg-amber-100 text-amber-800, bg-green-100 text-green-800.
  **Pre-populate ALL risk data from deep research** — this is a key selling point of the app.
  </action>
  <verify>npm run build succeeds. Risks page shows 6 pre-populated risks with severity badges and 7 compliance items. Executive Summary shows pre-filled text areas and 6 key highlights.</verify>
  <done>Risks & Due Diligence shows categorized risk cards with severity badges + compliance checklist, Executive Summary shows editable summary/mission/vision/highlights</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] Financial Projections shows Recharts chart + 12-month P&L table + unit economics
- [ ] Risks page shows 6 risks with color-coded severity badges
- [ ] Compliance checklist shows 7 items with status toggles
- [ ] Executive Summary shows pre-filled summary, mission, vision, and 6 highlights
- [ ] All sections use useSection hook for load/save
- [ ] Recharts renders without errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- 3 section pages fully interactive with pre-populated data
- Recharts chart renders financial data correctly
- Deep research risk data fully integrated
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-business-plan-sections/02-03-SUMMARY.md`
</output>
