---
phase: 12-integration-and-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/index.css, src/components/page-header.tsx, src/components/empty-state.tsx, src/components/stat-card.tsx]
autonomous: true
---

<objective>
Establish polished design system foundation and reusable UI patterns.

Purpose: Every screen needs to hit the same professional quality bar. This plan creates the shared design tokens, utility patterns, and reusable components that all subsequent polish plans reference. Think Stripe Dashboard: subtle shadows, refined typography hierarchy, consistent spacing rhythm, muted backgrounds with accent highlights.
Output: Refined global CSS, and 3 reusable components (PageHeader, EmptyState, StatCard) that enforce consistency.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-integration-and-polish/12-CONTEXT.md

@src/index.css
@src/app/layout.tsx
@src/components/ui/card.tsx
@src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Polish global CSS design tokens and typography</name>
  <files>src/index.css</files>
  <action>
  Refine the global CSS to establish a professional, data-dense aesthetic:

  **1. Add refined shadow and elevation tokens:**
  Add CSS custom properties for a consistent shadow system (Stripe-style soft shadows):
  ```css
  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.03);
  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.06), 0 1px 2px -1px rgb(0 0 0 / 0.06);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.05);
  --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.04), 0 1px 2px -1px rgb(0 0 0 / 0.03);
  ```
  Also add dark mode equivalents with slightly stronger opacity.

  **2. Add chart color tokens as CSS variables:**
  Centralize the semantic chart colors that are currently hardcoded as hex values in multiple files:
  ```css
  --chart-revenue: #22c55e;
  --chart-cost: #f97316;
  --chart-profit: #3b82f6;
  --chart-neutral: #64748b;
  --chart-accent-1: #8b5cf6;
  --chart-accent-2: #ec4899;
  ```

  **3. Add data-density utility classes:**
  Create utility classes for the Stripe/Retool data-dense feel:
  ```css
  .page-container { @apply space-y-6 pb-8; }
  .section-grid { @apply grid gap-4; }
  .stat-grid { @apply grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3; }
  .form-grid { @apply grid gap-4 sm:grid-cols-2; }
  ```

  **4. Refine existing base styles:**
  - Add a subtle `font-feature-settings: "cv02", "cv03", "cv04", "cv11"` to body for refined typography (if Inter font is used, these enable contextual alternates)
  - Ensure `font-variant-numeric: tabular-nums` is on body so numbers align in tables and cards
  - Add smooth focus ring transitions: `*:focus-visible { @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background transition-shadow; }`

  **5. Add card polish styles:**
  Add a refined card style that applies to all shadcn cards:
  ```css
  .card-elevated {
    @apply border bg-card shadow-[var(--shadow-card)] transition-shadow hover:shadow-[var(--shadow-sm)];
  }
  ```

  Do NOT change the existing OKLCH color system — it's well-designed. Only ADD new tokens on top.
  </action>
  <verify>Run `npx tsc --noEmit` and `npm run build`. Verify CSS variables compile correctly. Verify no existing styles broken.</verify>
  <done>Global CSS has shadow tokens, chart color tokens, data-density utilities, refined typography settings, and card elevation classes. Dark mode variants included. Existing OKLCH colors preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Create reusable PageHeader, EmptyState, and StatCard components</name>
  <files>src/components/page-header.tsx, src/components/empty-state.tsx, src/components/stat-card.tsx</files>
  <action>
  Create three reusable components that enforce visual consistency across all pages:

  **1. PageHeader component (`src/components/page-header.tsx`):**

  A consistent page header used at the top of every feature page:
  ```tsx
  interface PageHeaderProps {
    title: string;
    description?: string;
    children?: React.ReactNode; // For action buttons (AI bar, export, etc.)
  }
  ```

  Renders:
  - `h1` with `text-2xl font-semibold tracking-tight` (NOT text-3xl — Stripe uses moderate heading sizes)
  - Optional `p` with `text-sm text-muted-foreground mt-1`
  - Right-aligned children slot for actions
  - Flex layout: `flex items-start justify-between gap-4`
  - Bottom margin: `mb-6`

  Export as named export.

  **2. EmptyState component (`src/components/empty-state.tsx`):**

  A reusable empty state card for lists/grids with no data:
  ```tsx
  interface EmptyStateProps {
    icon: LucideIcon;
    title: string;
    description: string;
    action?: { label: string; onClick: () => void };
  }
  ```

  Renders a centered card with:
  - Icon (size-10) in muted foreground color with a light circular background
  - Title in `text-sm font-medium`
  - Description in `text-xs text-muted-foreground`
  - Optional action button (outline variant, sm size)
  - Overall: `flex flex-col items-center justify-center py-12 text-center`
  - Use `border-dashed` border style for the container

  **3. StatCard component (`src/components/stat-card.tsx`):**

  A reusable metric/KPI display card:
  ```tsx
  interface StatCardProps {
    label: string;
    value: string;
    trend?: 'up' | 'down' | 'neutral';
    sublabel?: string;
    className?: string;
  }
  ```

  Renders:
  - Label in `text-xs font-medium text-muted-foreground uppercase tracking-wider`
  - Value in `text-xl font-semibold tabular-nums` (tabular nums for alignment)
  - Optional trend indicator (green up arrow, red down arrow, gray dot for neutral)
  - Optional sublabel in `text-xs text-muted-foreground`
  - Card styling: `card-elevated` class from Task 1, padding `p-4`
  - Compact data-dense feel

  All three components should be minimal, well-typed, and use existing shadcn/ui primitives where possible.
  </action>
  <verify>Run `npx tsc --noEmit` and `npm run build`. Verify all three components export correctly. Verify they import cleanly from `@/components/`.</verify>
  <done>PageHeader, EmptyState, and StatCard components created with consistent styling. All typed, exported, and building cleanly.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with zero errors
- [ ] `npm run build` succeeds
- [ ] CSS variables defined for shadows, chart colors, utilities
- [ ] PageHeader component exported
- [ ] EmptyState component exported
- [ ] StatCard component exported
- [ ] Dark mode CSS variables included
- [ ] No existing styles broken
</verification>

<success_criteria>

- Global CSS has professional design tokens (shadows, chart colors, utilities)
- Three reusable components enforce visual consistency
- Typography refined with tabular-nums and feature settings
- All builds pass
- Foundation ready for screen-specific polish plans
</success_criteria>

<output>
After completion, create `.planning/phases/12-integration-and-polish/12-01-SUMMARY.md`
</output>
