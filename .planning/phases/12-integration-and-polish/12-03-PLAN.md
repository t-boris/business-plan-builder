---
phase: 12-integration-and-polish
plan: 03
type: execute
wave: 2
depends_on: ["12-01"]
files_modified: [src/features/dashboard/index.tsx, src/components/app-sidebar.tsx, src/components/business-header-bar.tsx, src/app/layout.tsx]
autonomous: true
---

<objective>
Polish dashboard, sidebar, and navigation to data-dense professional quality.

Purpose: The dashboard is the daily landing page. The sidebar is always visible. Together they set the persistent visual quality bar. These need the Stripe/Retool feel most â€” data-rich, organized, powerful. Navigation should feel smooth and intentional.
Output: Polished dashboard with refined KPI cards and chart, sleek sidebar, and improved layout shell.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-integration-and-polish/12-CONTEXT.md
@.planning/phases/12-integration-and-polish/12-01-PLAN.md

@src/features/dashboard/index.tsx
@src/components/app-sidebar.tsx
@src/components/business-header-bar.tsx
@src/app/layout.tsx
@src/index.css
@src/components/stat-card.tsx
@src/components/page-header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dashboard visual polish with refined KPIs and chart</name>
  <files>src/features/dashboard/index.tsx</files>
  <action>
  Polish the dashboard to feel like a Stripe/Retool analytics page:

  **Header:**
  - Use `PageHeader` component: title = business name or "Dashboard", description = "Overview of key metrics and projections"
  - Active scenario badge in PageHeader children slot, styled as a subtle pill: `text-xs font-medium bg-primary/10 text-primary px-2.5 py-0.5 rounded-full`

  **KPI Cards:**
  - Consider using the `StatCard` component from 12-01, or adopt its patterns
  - Primary KPIs (top 4): Full `card-elevated` treatment, `p-4`
  - Label: `text-xs font-medium text-muted-foreground uppercase tracking-wider`
  - Value: `text-2xl font-semibold tabular-nums` (larger for primary metrics)
  - Add semantic color to the value text (green for revenue/profit positive, red for negative)
  - Secondary KPIs (next 4): Slightly smaller cards, same pattern but `text-lg` for values
  - Gap between primary and secondary: `gap-3` within each grid, `gap-6` between grids

  **Chart area:**
  - Wrap chart in a card: `card-elevated` with proper header
  - Chart header: `text-sm font-medium` title "12-Month Financial Projection" + scenario name
  - Chart height: standardize at `h-[280px]` for comfortable viewing
  - Use CSS variable chart colors from index.css where possible
  - Y-axis: cleaner tick formatting (abbreviate large numbers: $10K, $100K)
  - Tooltip: styled with proper shadow, white background (even in dark mode context)
  - Grid lines: lighter stroke (`stroke="#e2e8f0"` or use muted color)

  **Section Links Grid:**
  - Cards with `card-elevated` class
  - Left-aligned icon in a subtle colored circular background (32px circle, light tint of the section's color)
  - Title: `text-sm font-medium`
  - Description: `text-xs text-muted-foreground line-clamp-2`
  - Hover: slight border color change + shadow increase
  - Grid: maintain `grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3`

  **Empty state (no variables):**
  - Use `EmptyState` component with appropriate icon and message
  - Link to scenario/variable configuration

  Do NOT change any data logic, atom reads, or chart data computation.
  </action>
  <verify>Run `npx tsc --noEmit` and `npm run build`. Verify dashboard renders with polished KPI cards and chart. Verify section links render correctly.</verify>
  <done>Dashboard has Stripe-style KPI cards with semantic colors, polished chart in elevated card, refined section link grid, and proper empty state. No data logic changed.</done>
</task>

<task type="auto">
  <name>Task 2: Sidebar, header bar, and layout shell polish</name>
  <files>src/components/app-sidebar.tsx, src/components/business-header-bar.tsx, src/app/layout.tsx</files>
  <action>
  Polish the navigation chrome to feel sleek and intentional:

  **Sidebar (`app-sidebar.tsx`):**
  - **Header/Business selector:** Clean business name display with subtle dropdown indicator. Business name truncated with `truncate` class if long. Dropdown content: add subtle separators between business list and actions.
  - **Section navigation items:** Ensure consistent icon sizing (size-4), proper text weight (`font-medium` for items, `font-normal` for sub-items). Active state: `bg-accent` with subtle left border accent or font-weight change.
  - **Group labels:** "Overview", "Business Plan", "Tools" labels in `text-xs font-medium text-muted-foreground uppercase tracking-wider` for clear hierarchy.
  - **Footer:** User section: avatar initial circle (bg-primary text-primary-foreground), name + email truncated. Theme toggle and sign-out as icon buttons.
  - **Spacing:** Consistent `gap-1` between menu items, `gap-4` between groups.
  - **Transitions:** Add `transition-colors duration-150` on menu items for smooth hover.

  **Header Bar (`business-header-bar.tsx`):**
  - Collapsible trigger: smaller chevron, subtle border-b when open
  - When expanded: cleaner form layout with proper grid alignment
  - Section toggles: align switches in a clean grid, label + switch pairs well-spaced
  - Auto-save indicator: subtle "Saved" text that appears briefly after save

  **Layout Shell (`layout.tsx`):**
  - Ensure header height is consistent: `h-14` (slightly shorter for data-density)
  - Breadcrumb: lighter weight, smaller size (`text-sm`), muted separators
  - Content area: consistent padding `px-6 py-5` for proper content framing
  - Sidebar trigger button: smaller, ghost variant

  Do NOT change any routing, state management, or component logic. Only visual refinements.
  </action>
  <verify>Run `npx tsc --noEmit` and `npm run build`. Verify sidebar renders with polished styles. Verify header bar collapses/expands correctly. Verify breadcrumbs display properly.</verify>
  <done>Sidebar has refined group labels, smooth hover transitions, and clean business selector. Header bar has polished collapsible settings. Layout shell has consistent spacing and breadcrumbs. No logic changed.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with zero errors
- [ ] `npm run build` succeeds
- [ ] Dashboard KPI cards have semantic colors and refined typography
- [ ] Chart wrapped in elevated card with standardized height
- [ ] Section links have icon backgrounds and hover effects
- [ ] Sidebar has clean group labels and smooth transitions
- [ ] Header bar collapsible works with polished layout
- [ ] No data logic, routing, or state management changed
</verification>

<success_criteria>

- Dashboard feels like a Stripe analytics page
- Navigation feels sleek and intentional
- Consistent use of design system tokens from 12-01
- All builds pass
</success_criteria>

<output>
After completion, create `.planning/phases/12-integration-and-polish/12-03-SUMMARY.md`
</output>
