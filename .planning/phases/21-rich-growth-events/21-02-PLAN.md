---
phase: 21-rich-growth-events
plan: 02
type: execute
wave: 2
depends_on: ["21-01"]
files_modified:
  - src/features/sections/growth-timeline/components/event-form.tsx
  - src/features/sections/growth-timeline/components/event-card.tsx
  - src/lib/ai/section-prompts.ts
autonomous: true
---

<objective>
Add UI support for all 6 new event types in the event form and event card components.

Purpose: Users can create, edit, and view all new event types (funding-round, facility-build, hiring-campaign, price-change, equipment-purchase, seasonal-campaign) with type-specific fields and duration inputs.
Output: Updated event-form.tsx with fields for each new type, updated event-card.tsx with icons/summaries, updated AI prompts.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-rich-growth-events/21-CONTEXT.md
@.planning/phases/21-rich-growth-events/21-01-SUMMARY.md

@src/features/sections/growth-timeline/components/event-form.tsx
@src/features/sections/growth-timeline/components/event-card.tsx
@src/features/sections/growth-timeline/index.tsx
@src/lib/ai/section-prompts.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add new event types to the event form</name>
  <files>src/features/sections/growth-timeline/components/event-form.tsx</files>
  <action>
Follow the established pattern in event-form.tsx. For each new type, update three locations:

**1. EVENT_TYPE_LABELS** — Add entries:
- `'funding-round': 'Funding Round'`
- `'facility-build': 'Facility / Build-Out'`
- `'hiring-campaign': 'Hiring Campaign'`
- `'price-change': 'Price Change'`
- `'equipment-purchase': 'Equipment Purchase'`
- `'seasonal-campaign': 'Seasonal Campaign'`

**2. makeDefaultDelta()** — Add cases:
- `funding-round`: `{ amount: 0, legalCosts: 0, investmentType: 'equity' }`
- `facility-build`: `{ constructionCost: 0, monthlyRent: 0, capacityAdded: 0, capacityItemId: undefined }`
- `hiring-campaign`: `{ totalHires: 1, role: '', ratePerHour: 0, hoursPerWeek: 40, recruitingCostPerHire: 0 }`
- `price-change`: `{ newAvgCheck: 0 }`
- `equipment-purchase`: `{ purchaseCost: 0, capacityIncrease: 0, maintenanceCostMonthly: 0, capacityItemId: undefined }`
- `seasonal-campaign`: `{ budgetIncrease: 0 }`

**3. Type-specific field JSX** — Add conditional blocks for each type. Follow the existing `grid grid-cols-2 gap-3` pattern with Label + Input pairs:

`funding-round`:
- Amount ($) — number input
- Legal Costs ($) — number input
- Investment Type — select: equity / debt / grant

`facility-build`:
- Construction Cost ($) — number input
- Monthly Rent After Completion ($) — number input
- Capacity Added (units/month) — number input
- Product/Service (optional) — select dropdown from capacityItems (same pattern as capacity-change)

`hiring-campaign`:
- Total Hires — number input
- Role — text input
- Rate ($/hr) — number input
- Hours/Week — number input (default 40)
- Recruiting Cost per Hire ($) — number input

`price-change`:
- New Average Check ($) — number input

`equipment-purchase`:
- Purchase Cost ($) — number input
- Capacity Increase (units/month) — number input
- Maintenance Cost ($/month) — number input
- Product/Service (optional) — select dropdown from capacityItems

`seasonal-campaign`:
- Monthly Budget Increase ($) — number input

**4. Duration field** — For types that support duration (`facility-build`, `hiring-campaign`, `seasonal-campaign`), add a "Duration (months)" number input ABOVE the type-specific fields. This should read/write `durationMonths` on the event (not the delta). Add `durationMonths` to the form state, initialize from `initial?.durationMonths ?? 1`, and include in the saved GrowthEvent. Only show duration field when the selected type is one of the three duration types.

Use `min={1}` for the duration field.

No min constraints on financial inputs (same pattern as existing types — user can enter negative values).
  </action>
  <verify>npx tsc --noEmit passes, npx vite build succeeds</verify>
  <done>All 6 new event types have form fields, duration field shown for duration-enabled types, form produces correct GrowthEvent objects</done>
</task>

<task type="auto">
  <name>Task 2: Add new event types to the event card display</name>
  <files>src/features/sections/growth-timeline/components/event-card.tsx</files>
  <action>
Follow the established pattern in event-card.tsx. Update two locations:

**1. EVENT_TYPE_CONFIG** — Add entries with appropriate lucide-react icons and colors:
- `'funding-round'`: icon: `Banknote`, color: `text-emerald-600 dark:text-emerald-400`, bg: `bg-emerald-100 dark:bg-emerald-900/40`
- `'facility-build'`: icon: `Building2`, color: `text-orange-600 dark:text-orange-400`, bg: `bg-orange-100 dark:bg-orange-900/40`
- `'hiring-campaign'`: icon: `Users`, color: `text-cyan-600 dark:text-cyan-400`, bg: `bg-cyan-100 dark:bg-cyan-900/40`
- `'price-change'`: icon: `Tag`, color: `text-indigo-600 dark:text-indigo-400`, bg: `bg-indigo-100 dark:bg-indigo-900/40`
- `'equipment-purchase'`: icon: `Cpu`, color: `text-teal-600 dark:text-teal-400`, bg: `bg-teal-100 dark:bg-teal-900/40`
- `'seasonal-campaign'`: icon: `CalendarRange`, color: `text-pink-600 dark:text-pink-400`, bg: `bg-pink-100 dark:bg-pink-900/40`

Import all new icons from lucide-react.

**2. getEventSummary()** — Add cases:
- `funding-round`: `"$${amount.toLocaleString()} (${investmentType}) — $${legalCosts.toLocaleString()} legal"`
- `facility-build`: `"$${constructionCost.toLocaleString()} build → $${monthlyRent.toLocaleString()}/mo rent + ${capacityAdded} capacity"`. If event has durationMonths, append ` (${durationMonths}mo)`.
- `hiring-campaign`: `"${totalHires}x ${role} @ $${ratePerHour}/hr"`. If event has durationMonths, append ` over ${durationMonths}mo`.
- `price-change`: `"Avg check → $${newAvgCheck.toLocaleString()}"`
- `equipment-purchase`: `"$${purchaseCost.toLocaleString()} + $${maintenanceCostMonthly}/mo maint. + ${capacityIncrease} capacity"`
- `seasonal-campaign`: `"+$${budgetIncrease.toLocaleString()}/mo marketing"`. If event has durationMonths, append ` for ${durationMonths}mo`.

The `getEventSummary` function receives a `GrowthEvent` — access `event.durationMonths` directly for the duration display.

Update the function signature to accept the full `GrowthEvent` instead of just accessing `event.delta`. Currently it takes `event: GrowthEvent` and destructures `const { delta } = event` — so just access `event.durationMonths` alongside `delta`.
  </action>
  <verify>npx tsc --noEmit passes</verify>
  <done>All 6 new event types display with unique icons, colors, and descriptive summaries including duration info</done>
</task>

<task type="auto">
  <name>Task 3: Update AI prompts and run final verification</name>
  <files>src/lib/ai/section-prompts.ts</files>
  <action>
Update the `growth-timeline` entry in the section prompts to mention all new event types:

For `generate`:
```
Generate a growth timeline for 12-24 months. Include key growth events using these types: team changes (hire), cost changes, capacity changes, marketing budget changes, funding rounds (equity/debt/grant with legal costs), facility builds (construction period + ongoing rent), hiring campaigns (staggered hires over time), price changes, equipment purchases (one-time cost + ongoing maintenance), and seasonal campaigns (temporary marketing boosts). Tie every event to realistic financial impacts. Use duration for events that take time (facility builds, hiring campaigns, seasonal campaigns).
```

For `improve`:
```
Improve the existing growth timeline. Keep all existing events, refine financial assumptions to be more realistic, consider adding funding rounds, facility builds, or equipment purchases if appropriate for the business stage. Improve duration estimates for multi-month events. Ensure event sequencing makes business sense.
```

For `expand`:
```
Expand the growth timeline with more events across all categories: funding (rounds, grants), operations (facility builds, equipment), team (hiring campaigns), revenue (price changes), and marketing (seasonal campaigns). Use duration parameters for multi-month events. Keep existing events, add complementary ones that model realistic business growth.
```
  </action>
  <verify>npx vite build succeeds, npx vitest run — all tests pass</verify>
  <done>AI prompts reference all 11 event types, full build and test suite green</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes — no type errors
- [ ] `npx vite build` succeeds — no build errors
- [ ] `npx vitest run` passes — all tests green
- [ ] All 6 new types visible in event type dropdown
- [ ] Duration field appears only for facility-build, hiring-campaign, seasonal-campaign
- [ ] Each type shows correct icon and summary in event card
</verification>

<success_criteria>

- All 6 new event types have complete form fields in event-form.tsx
- Duration input shown for 3 duration-enabled types
- All 6 types have unique icons, colors, and summaries in event-card.tsx
- AI prompts updated to reference all event types
- Full build and test suite pass
</success_criteria>

<output>
After completion, create `.planning/phases/21-rich-growth-events/21-02-SUMMARY.md`
</output>
